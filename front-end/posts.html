<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Create a Post</title>
  <link rel="stylesheet" href="posts.css" />
</head>
<body>


  <!-- Sidebar navigation on the left -->
<div class="sidebar">
  <a href="logoutPage.html">Logout</a>
  <a href="profilepage.html">Profile Page</a>
  <a href="myplants.html">View Plants</a>
  <a href="plantMap.html">View Map</a>
  <a href="aboutUs.html">About Us</a>
  <a href="posts.html">Posts</a> <!-- New link added -->
</div>

  <!-- Main content area shifted to the right -->
  <div class="mainContent" style="margin-left: 220px; padding: 20px;">

    <div class="post-form">
      <h2>Create a New Post</h2>
      <form id="postForm" method="POST" enctype="multipart/form-data">
        <div class="form-group">
          <label for="title">Post Title</label>
          <input type="text" id="title" name="title" required />
        </div>

        <div class="form-group">
          <label for="description">Description</label>
          <textarea id="description" name="description" rows="4" required></textarea>
        </div>

        <div class="form-group">
          <label for="image">Upload Image</label>
          <input type="file" id="image" name="image" accept="image/*" />
          <img id="preview" src="#" alt="Image Preview" style="display:none;" />
        </div>

        <div class="form-group">
          <button type="submit">Post</button>
        </div>
      </form>
    </div>

    <div id="postList" class="post-list">
      <h2>All Posts</h2>
    </div>

  </div>

  <script>
    // Image preview
    document.getElementById("image").addEventListener("change", function(event) {
      const file = event.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
          const preview = document.getElementById("preview");
          preview.src = e.target.result;
          preview.style.display = "block";
        };
        reader.readAsDataURL(file);
      }
    });

    // Display posts after form submission
    document.getElementById("postForm").addEventListener("submit", function(e) {
      e.preventDefault();

      const title = document.getElementById("title").value;
      const description = document.getElementById("description").value;
      const imageInput = document.getElementById("image");
      const postList = document.getElementById("postList");

      const post = document.createElement("div");
      post.className = "post";
      post.innerHTML = `<h3>${title}</h3><p>${description}</p>`;

      const file = imageInput.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
          const img = document.createElement("img");
          img.src = e.target.result;
          img.alt = "Post Image";
          img.style.maxWidth = "300px";
          post.appendChild(img);
          postList.appendChild(post);
        };
        reader.readAsDataURL(file);
      } else {
        postList.appendChild(post);
      }

      document.getElementById("postForm").reset();
      document.getElementById("preview").style.display = "none";
    });
  </script>

</body>
</html>
